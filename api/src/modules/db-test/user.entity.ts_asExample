
import { Entity, Column, ObjectIdColumn, BeforeInsert, ObjectID, BeforeUpdate } from 'typeorm';

export interface IUser {
  id?: ObjectID;
  firstName: string;
  lastName: string;
  email: string;
  createdAt: Date;
  updatedAt: Date;
}

@Entity()
export class UserEntity {
  @ObjectIdColumn()
  id: IUser['id'];

  @Column()
  firstName: IUser['firstName'];

  @Column()
  lastName: IUser['lastName'];

  @Column()
  email: IUser['email'];

  @Column()
  createdAt: IUser['createdAt'];

  @Column()
  updatedAt: IUser['updatedAt'];

  @BeforeInsert()
  setDefaultValue() {
    const newDate = new Date();
    this.createdAt = newDate;
    this.updatedAt = newDate;
  }

  @BeforeUpdate()
  updateDefaultValues() {
    this.updatedAt = new Date();
  }
}